{"version":3,"sources":["firebase-prototype-dao.js"],"names":[],"mappings":"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","file":"firebase-prototype-dao-compiled.js","sourcesContent":["var FirebaseDAO = function(component, uId) {\n  /**\n   * Constuctor\n   * context          = get context from element\n   * userId           = User Login ID\n   * firebaseBaseUrl  = firebase base URL\n   */\n  this.context = component;\n  this.userId = uId;\n  this.firebaseBaseUrl = 'https://yeah-url-extension.firebaseio.com/';\n\n  this.test = [\"\"];\n};\n\n/**\n * load Collection\n * @param route\n * @param pathToItems\n * @param pathToKeywords\n */\nFirebaseDAO.prototype.loadCollections = function(route, pathToItems, pathToKeywords) {\n  var dataRef = new Firebase(this.firebaseBaseUrl + this.userId + route);\n  dataRef.on('value', function(snapshot) {\n    this.context.set(pathToItems, []);\n    this.context.set(pathToKeywords, []);\n    snapshot.forEach(function (child) {\n      this.context.push(pathToItems, this._extractKeywords(child.val(), pathToKeywords));\n    }.bind(this));\n    //this._sortKeywords(pathToKeywords);\n  }.bind(this));\n};\n\n/**\n * extract keywords from collections\n * @param items\n * @param pathToKeywords\n * @private\n */\nFirebaseDAO.prototype._extractKeywords = function(items, pathToKeywords) {\n  var kw = items[0].keywords;\n  if (this.context.get(pathToKeywords).length === 0) {\n    this.context.push(pathToKeywords, '');\n  }\n  if (this.context.get(pathToKeywords).indexOf(kw) === -1) {\n    this.context.push(pathToKeywords, kw);\n  }\n  //if (this.test.indexOf(kw) === -1) {\n  //  this.test.push(kw);\n  //  this.test.sort();\n  //}\n\n  return items;\n};\n\n/**\n * sort keywords from collections\n * @param pathToKeywords\n * @private\n */\nFirebaseDAO.prototype._sortKeywords = function(pathToKeywords) {\n  var arr = this.context.get(pathToKeywords);\n  this.context.set(pathToKeywords, []);\n  this.context.set(pathToKeywords, arr.sort());\n  //this.context.set(pathToKeywords, this.test);\n};\n\n/**\n * remove item from Collection\n * @param route\n * @param id\n * @param objId\n * @return {Promise}\n */\nFirebaseDAO.prototype.removeItemFromCollection = function(route, id, objId) {\n  return new Promise(function(resolve, reject) {\n    var ref = new Firebase(this.firebaseBaseUrl + this.userId + route + '/' + objId + '/' + id);\n    var onComplete = function(error) {\n      if (error) {\n        reject(error);\n      } else {\n        resolve({'value':'remove was successful'});\n      }\n    };\n    ref.remove(onComplete);\n  }.bind(this));\n};\n\n/**\n * edit item in Collection\n * @param route\n * @param id\n * @param objId\n * @param item\n */\nFirebaseDAO.prototype.editItemFromCollection = function(route, id, objId, item) {\n  return new Promise(function(resolve, reject) {\n    var ref = new Firebase(this.firebaseBaseUrl + this.userId + route + '/' + objId + '/' + id);\n    var onComplete = function(error) {\n      if (error) {\n        reject(error);\n      } else {\n        resolve({'value':'edit was successful'});\n      }\n    };\n    ref.update(item, onComplete);\n  }.bind(this));\n};\n"]}